---
title: 2021年总结
date: 2021-01-01 15：39：00
categories:
- 碎碎念
---

​    前几天和师兄交流，师兄已经开始工作了，在浙江的一个大学里。想起来还没毕业时师兄说要去公司赚大钱，现在又去任教，师兄的说法是“机缘巧合之下被人才引进”。哎，果然和我一样。

​    说来惭愧，过去一年自我感觉提升不大，所以最大的成就估计就是交了个女朋友吧。涵宝确实是个很好的对象，对我很认真，负责，很细致也很照顾我。和其他人交往的经历里我其实多是弱势的一方，但是和涵宝在一起完全不一样，很尊重，很平等，这些都是让我觉得可贵也是让我觉得不能放弃的。和涵宝交往之前的那段时间我正处于焦虑之中，或者说，从上大学开始就一直处于焦虑之中，总结起来不过一个原因：我太菜了。几年来不断有人给予我夸奖，但那只会让我更不安更焦虑。和涵宝在一起后整个人都精神了起来，因为加薪了所以换了更好一点的住处，人也重了二十斤，终于达到了标准重量。很喜欢涵宝，涵宝是我的支柱之一，明年总结我还会提到的！

​    过去的一年，工作主要做了两个，一个是优化人脸识别算法，一个是开发量化框架。

​    以前在学校里觉得大牛的壁垒是技术，工作了才发现真正的壁垒是业务能力。拿着开源的人脸识别算法和人脸识别数据集，要做出能和其他家相比对的模型，着实有点难度。花了很多时间去分析业务数据，中间也看了很多论文，网络结构上看了一众Attention相关的文章，逐一实验下来发现果然只有SENet能带了一些实质性的精度提高，其它的结构付出的计算量太大而带来的精度提升太小，不痛不痒。像可形变卷积也考虑过，但是一来人脸识别这个任务本身对感受野依赖不高，而来也不容易做上硬件，故抛弃。也用了一些新的激活函数，最终亦发现还是简单粗暴的PReLU更有效，其它的也是计算量增加太大了（最终要做到硬件上所以带指数的基本只能抛弃）。有一段时间里可视化了特征图之后发现关注点都在眉眼，虽然关注点是对的但是关注区域过于狭窄了，于是考虑用上人脸几何特征，因为硬件容量不够了所以不能再增大模型，于是给网络在训练的时候加了分支进行关键点预测，效果是有的，就是训练时间又久了一些，好在推理模型大小不变，所以也算是一个提高。再后来，又在损失函数上下功夫，当时看到一篇控制类间距离在训练时等距的，一开始还挺兴奋的，做了实验才发现那种方式只适合大GPU集群训练，显存要求太高了，那段时间常常思考，是否可以每次随机抽样一些类而不采用所有类，并采用动量的方式更新。可惜后来没有继续实验。现在回过头思考，可能效果也不明显，因为实验发现在不用任何策略的情况下训练后类别中心向量其实已经基本正交了，所以更多的还是应该在增加内聚性上下功夫。再后来，由于隔壁部门抱怨模型太大塞不进硬件里，于是又尝试了诸如EfficientNet、MobileNet、FBNet、IdleBlock等等轻量结构，全部失败了，还是ResNet好用。最后终于意识到应该在业务上下功夫，最直接的就是增广数据或者采集数据，减小domain差异，研究了一小段时间后精度也小有提升，但那是都已经开始做量化任务了，也就没有进一步的往深了做。因为疫情，期间也做了一个戴口罩版本的人脸识别，但是精度迟迟上不去，几乎成为我一个心结（虽然客户反馈其它厂家也差不多），内部压力给的确实紧（甚至开会的时候直接说因为口罩模型精度问题，公司订单少了三分之一），计算量不能增加，数据根本没地方采集（只能自己贴图增广），感觉自己走到了绝境，好在后来又做了一些时间，缓解了。不过仍觉得较低，最近也正在做新的实验。老板们吹牛逼的时候说的倒是轻巧，根本没商量的情况下就和客户说精度99.8%之类的话，也不看是在哪个数据集下测试的结果。哎，感觉研究还是没有做深做透，浮于表面，明显意识到了自身的短板不是知识，而是对问题的分析能力，是能从现象透视到本质的能力。

​    下半年主要是在做量化工作，尝试了一小段时间的QuantizationAwareTraining，做一半的时候出差了一个月，回来之后重排任务优先级的时候把这件事QAT给置后了，于是很长一段时间都在做PostTrainingQuantization，能找到的论文基本都是用浮点缩放为8b再缩放回来的，而我们做的是全8b推理，调研了一番发现只有高通发了几篇论文，其他家的全8b推理量化方法都是捂在手里、做成动态库、二进制文件。偏偏客户们又喜欢用DepthwiseConvolution，这种结构训练出来的模型极难量化，特别是用全8b的时候。说起来十分羞耻，一番实验之后竟找不到好的解决办法，于是工作内容转为做一套好看的量化API，至于底层，虽然修缮了一下，但本质上还是粗暴直接的搜索。好在做量化API也是有所提升的（虽然自身代码能力也不弱），也更加意识到了充分审查和充分测试的重要性。

​    前段时间大学时期的老师也发来消息问候工作情况，还说如果想回去继续深造的话他依然十分欢迎。我是有点想的，但是短时间内确实沉不下心来。

​    写完发现把这东西写成工作报告了，而实际上过去一年除了工作和恋爱，也没有时间去做别的事情。新的一年会更好，大目标要分解成一个个小目标并逐一去完成。我已经比去年更加自律了一些（但仍不够），应该更加自律，更加顽强。前两天师兄说，“每过两年我就会比两年前的自己强一倍。内卷卷的都是不上不下的人，那些底下的人连卷的机会都没有。我们要做就要做技术工作。”

​    我会更好，也会给涵宝更好。